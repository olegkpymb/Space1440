#Программа синхронизации времени между двумя устройствами

Программно-аппаратная реализация устройства
Устройство, принимающее сигнал PPS и пакеты данных, содержащие 64-битную микросекундную метку времени, реализван на плате NUCLEO-G431KB с микроконтроллером STM32G431KBT6.
Исходные коды выполнены на языке Си с применением компилятора gcc.
Рабочая частота микроконтроллера настроена на 170 MHz с тактированием от кварцевого резонатора 24 MHz, стабильностью частоты 20ppm.
На микроконтроллере запущен 32 битный таймер TIMER2 на отсчет микросекундных временных интервалов, работающего в течении всей жизни программы.
Сигнал синхронизации заведен на вывод PA0 с обработкой в подпрограмме прерывания, вызываемой по переднему фронту.
Пакеты данных, содержащие 64-битную микросекундную метку времени, заведены на прием на вывод PA3 интерфейс UART2. Обработка принимаемых байт данных осуществляется в подпрограмме прерывания. 
Скорость обмена 115200 бод, 1 старт бит, 1 стоп бит, бита четности нет. Считаем, что байты поступают в формате Big Endian, от старшего к младшему.
Обработка пакета данных и оценка интервалов времени, корректировка системного времени выполняется в теле основной программы устройства.
Выполняется переключение вывода PB8, подключенного к светодиоду LED2, на момент установки нового системного времени на устройстве.

#Описание алгоритма работы программы микроконтроллера
В момент получения сигнала PPS программа микроконтроллера запоминает текущую метку времени таймера, сбрасывает буффер с байтами пакета данных, выставляет флаг получения сигнала PPS.
Далее программа микроконтроллера ожидает получения пакета данных в течении 1 с + 15%:
- Если за выделенный интервал пакет данных получен, то преобразует его в 64 битную микросекундную метку времени и корректирует на интервал времени от получения сигнала PPS до текущего момента по метке времени таймера и устанавливает новое системное время. 
- Если за выделенный интервал пакет данных не получен, то сбрасывает флаг получения сигнала PPS. 
Переход к ожиданию нового сигнала PPS и его обработка.

#Компиляция исходных кодов программы и загрузка в устройство
Для компиляции исходных кодов программы на Windows 10 необходимо установить:
- GNU ARM Embedded Toolchain 
- Windows Build Tools binaries (Make, cp, rm, echo, sh...);
- STM32CubeProgrammer.

В переменные среды ОС необходимо прописать пути к каталогам bin программ GNU ARM Embedded Toolchain и Windows Build Tools binaries.

Скачать программы можно по ссылкам:
https://developer.arm.com/downloads/-/gnu-rm#:~:text=The%20GNU%20Arm%20Embedded%20Toolchain,Arm%20Cortex-R%20processor%20families
https://xpack.github.io/dev-tools/windows-build-tools/
https://www.st.com/en/development-tools/stm32cubeprog.html

Из командной строки cmd перейти в каталог с исходными кодами программы и выполнить команду make. 
После завершения процесса компиляции исходных кодов программы в каталоге появится файл firmware.hex.
Записать файл firmware.hex в устройство при помощи STM32CubeProgrammer.
